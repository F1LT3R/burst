(function(t,e){function i(t,e){return t-e}function s(t){if(t.constructor.toString().indexOf("Array")==-1){return false}else{return true}}var r={linear:function(t,e,i,s,r){return s*e/r+i}};function a(){this.timelines={};this.loaded={};this.fps=30;this.timelineCount=0;this.onframe=undefined;this.exports={};this.on=true}Burst_proto.timeline=function(t,e,i,s,r,a){return this.timelines[t]||(arguments.length>1?this.timelines[t]=new n(t,e,i,s,r,a,this):undefined)};Burst_proto.load=function(t){return this.loaded[t]||function(){for(var e in this.timelines){if(this.timelines[e].name===t){return this.loaded[e]=this.timelines[e]}}}.call(this);return false};Burst_proto.unload=function(t){delete this.loaded[t];return true};Burst_proto.play=function(){var e=this;clearInterval(t.interval);t.interval=window.setInterval(function(){e.frame()},1e3/this.fps)};Burst_proto.frame=function(t){if(this.onframe){this.onframe()}for(var e in this.loaded){if(this.hasOwnProperty("loaded")){this.loaded[e].play(t)}}};Burst_proto.stop=function(){window.clearInterval(this.interval);delete this.interval};function n(t,e,i,s,r,a,n){n.timelineCount++;this.name=t;this.start=this.frame=e;this.end=i;this.speed=s;this.loop=r;this.callback=a;this.parent=n;this.objects={};return this}Timeline_proto=n.prototype;Timeline_proto.obj=function(t,e){return this.objects[t]||(this.objects[t]=new h(t,e,this))};Timeline_proto.play=function(t){this.frame=t||(this.frame+=this.speed);if(this.loop){if(this.frame>this.end){this.frame=this.start}if(this.frame<this.start){this.frame=this.end}}else{if(this.frame>=this.end){this.frame=this.end;if(this.callback){this.callback(this.frame)}if(!this.loop){this.parent.unload(this.name)}}if(this.frame<=this.start){this.frame=this.start;if(!this.loop){this.parent.unload(this.name)}if(this.callback){this.callback(this.frame)}}}var e;for(var i in this.objects){thisObject=this.objects[i];for(var s in thisObject.tracks){thisObject.tracks[s].play(this.frame)}}if(this.always){this.always.call(this,this.frame)}};function h(t,e,i){console.log(e);this.name=t;this.objRef=e;this.parent=i;this.tracks={};return this}Obj_proto=h.prototype;Obj_proto.track=function(t){return this.tracks[t]||(this.tracks[t]=new o(t,this))};function o(t,e){this.prop=t;this.ease=r;this.parent=e;this.keys=[];this.unit=typeof this.parent.objRef[t]==="number"?undefined:this.parent.objRef[t].replace(/[.0-9\-]/g,"");this.alwaysCallback;return this}Track_proto=o.prototype;Track_proto.key=function(t,e,s,r){for(var a=0,n=this.keys.length;a<n;a++){if(this.keys[a].frame===t){return this.keys[a]}}if(arguments.length>1){var h=[],o=[],f=this.keys[this.keys.length]=new l(t,e,s,r,this);for(a=0;a<this.keys.length;a++){h[a]=this.keys[a].frame}h.sort(i);for(a=0;a<this.keys.length;a++){for(var c=0;c<this.keys.length;c++){if(h[a]==this.keys[c].frame){o[a]=this.keys[c]}}}this.keys=[];for(a=0,n=o.length;a<n;a++){this.keys[a]=o[a]}return f}else{return false}};Track_proto.play=function(t){var e,i,s,r,a;for(var n=0,h=this.keys.length;n<h;n++){e=this.keys[n];i=this.keys[n+1];if(i===undefined&&n+1>h-1){i=this.keys[h-1]}if(t>=e.frame&&t<i.frame){if(e.isArray){a=e.aryLen;for(r=0;r<a;r++){s=this.ease[e.ease](0,t-e.frame,e.value[r],i.value[r]-e.value[r],i.frame-e.frame);this.parent.objRef[this.prop][r]=s}}else if(e.isString){this.parent.objRef[this.prop]=e.value}else{s=this.ease[e.ease](0,t-e.frame,e.value,i.value-e.value,i.frame-e.frame);this.parent.objRef[this.prop]=s+(this.unit||0)}if(this.lastKeyFired&&this.lastKeyFired.frame!=e.frame){this.lastKeyFired.callbackFired=false}if(e.callback&&!e.callbackFired){e.callback.call(this.parent.objRef,{frame:t,prop:this.prop,burstTrack:this});e.callbackFired=true;this.lastKeyFired=e}}else if(t>=i.frame||t===0){if(e.isArray){a=e.aryLen;for(r=0;r<a;r++){this.parent.objRef[this.prop][r]=e.value[r]}}else{this.parent.objRef[this.prop][r]=e.value}}}if(this.alwaysCallback){this.alwaysCallback.call(this.parent.objRef,{frame:t,prop:this.prop,burstTrack:this})}};Track_proto.always=function(t){this.alwaysCallback=t;return this};Track_proto.obj=function(t,e){var i=this.parent.parent;return i.obj.call(i,t,e)};function l(t,e,i,r,a){this.frame=t;this.value=e;if(s(e)){this.isArray=true;this.aryLen=e.length}if(typeof e=="string"){this.isString=true}this.ease=i||"linear";this.callback=r;this.callbackFired=false;this.parent=a;return this}Key_proto=l.prototype;Key_proto.obj=function(t,e){var i=this.parent.parent.parent;return i.obj.call(i,t,e)};Key_proto.track=function(t,e,i){var s=this.parent.parent;return s.track.call(s,t,e,i)};Key_proto.key=function(t,e,i,s){var r=this.parent;return r.key.call(r,t,e,i,s)};Key_proto.always=function(t){var e=this.parent;return e.always.call(e,t)};var f=window.burst=new a})(window,document);